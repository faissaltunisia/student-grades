<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØµØ­Ù Ø§Ù„Ù…Ø±ÙˆØ¬ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ | Ù…Ù†ØµØ© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --royal-green: #062c1b;
            --oman-green: #00843d;
            --gold-light: #d4af37;
            --gold-dark: #9d7d3d;
            --paper: #fdfaf1;
            --accent-red: #d21034;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: var(--royal-green) url('https://www.transparenttextures.com/patterns/arabesque.png');
            font-family: 'Tajawal', sans-serif;
            color: #fff; min-height: 100vh;
        }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø³Ù„Ø·Ø§Ù†ÙŠ --- */
        .official-header {
            background: linear-gradient(135deg, #0a3d28, #062c1b);
            border-bottom: 4px solid var(--gold-light);
            padding: 20px; text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .header-content {
            max-width: 1100px; margin: 0 auto;
            display: flex; align-items: center; justify-content: space-between;
        }

        .gov-title h2 { font-family: 'Amiri', serif; font-size: 1.3rem; color: var(--gold-light); }
        .school-logo { width: 80px; height: 80px; background: #fff; border: 3px solid var(--gold-light); border-radius: 50%; padding: 5px; box-shadow: 0 0 15px rgba(212,175,55,0.4); }

        /* --- Ø­Ø§ÙˆÙŠØ© Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© --- */
        .main-container {
            max-width: 900px; margin: 40px auto;
            background: var(--paper); border-radius: 20px; padding: 30px;
            min-height: 80vh; box-shadow: 0 30px 70px rgba(0,0,0,0.7);
            color: #333; border-left: 12px solid var(--gold-dark);
            position: relative;
        }

        /* --- Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ --- */
        .prog-section { background: #f0f0f0; padding: 15px; border-radius: 12px; margin-bottom: 25px; border: 1px solid #ddd; }
        .prog-label { display: flex; justify-content: space-between; margin-bottom: 8px; font-weight: 700; color: var(--royal-green); }
        .prog-track { background: #dcdcdc; height: 12px; border-radius: 10px; overflow: hidden; }
        .prog-fill { background: linear-gradient(90deg, var(--oman-green), var(--gold-light)); width: 0%; height: 100%; transition: 1s ease; }

        /* --- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ÙØ§Ø®Ø±Ø© --- */
        .card-item {
            background: #fff; border: 1px solid #eee;
            border-right: 6px solid var(--gold-dark); border-radius: 15px;
            padding: 20px; margin-bottom: 20px;
            display: flex; align-items: center; justify-content: space-between;
            cursor: pointer; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .card-item:hover { transform: translateX(-10px); border-color: var(--oman-green); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        
        .card-body { display: flex; align-items: center; gap: 20px; }
        .icon-quran { width: 45px; height: 45px; fill: var(--gold-dark); }
        
        .badge { font-size: 0.75rem; padding: 4px 12px; border-radius: 20px; background: #eee; font-weight: bold; }
        .badge-done { background: var(--oman-green); color: white; }

        /* --- ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ --- */
        .view { display: none; animation: slideUp 0.5s ease; }
        .view.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .btn-return {
            background: var(--royal-green); color: white; border: none;
            padding: 10px 20px; border-radius: 8px; cursor: pointer; margin-bottom: 20px;
            display: inline-flex; align-items: center; gap: 10px; font-weight: bold;
        }

        .video-box {
            width: 100%; aspect-ratio: 16/9; background: #000;
            border-radius: 15px; border: 5px solid var(--gold-dark); overflow: hidden;
        }

        footer { text-align: center; padding: 30px; color: var(--gold-light); font-size: 0.85rem; }
    </style>
</head>
<body>

<header class="official-header">
    <div class="header-content">
        <div class="gov-title"><h2>Ø³Ù„Ø·Ù†Ø© Ø¹Ù…Ø§Ù†</h2><h3>ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ±Ø¨ÙŠØ© ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ…</h3></div>
        <img src="https://raw.githubusercontent.com/faissaltunisia/student-grades/main/Screenshot%202025-12-16%20235912.png" class="school-logo">
        <div class="gov-title" style="text-align: left;"><h2>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù…Ø±ÙˆØ¬</h2><h3>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…ØµØ­Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</h3></div>
    </div>
</header>

<div class="main-container">
    
    <div id="v-grades" class="view active">
        <h2 style="text-align: center; font-family: 'Amiri'; color: var(--gold-dark); font-size: 2.2rem; margin-bottom: 30px;">ÙÙ‡Ø±Ø³ Ø§Ù„ØµÙÙˆÙ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</h2>
        <div id="grades-list"></div>
    </div>

    <div id="v-semesters" class="view">
        <button class="btn-return" onclick="showView('v-semesters', 'v-grades')">ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙÙˆÙ</button>
        <h2 id="sem-grade-label" style="font-family: 'Amiri'; color: var(--royal-green); margin-bottom: 20px;"></h2>
        <div id="semesters-list"></div>
    </div>

    <div id="v-surahs" class="view">
        <button class="btn-return" onclick="showView('v-surahs', 'v-semesters')">ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙØµÙˆÙ„</button>
        <div class="prog-section">
            <div class="prog-label"><span id="prog-title">ØªÙ‚Ø¯Ù…Ùƒ ÙÙŠ Ø§Ù„ÙØµÙ„</span><span id="prog-percent">0%</span></div>
            <div class="prog-track"><div class="prog-fill" id="prog-fill"></div></div>
        </div>
        <div id="surahs-list"></div>
    </div>

    <div id="v-player" class="view">
        <button class="btn-back" style="background:var(--gold-dark); color:white; border:none; padding:10px; cursor:pointer; border-radius:5px;" onclick="showView('v-player', 'v-surahs')">ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
        <h2 id="p-surah-name" style="text-align: center; margin: 20px 0; font-family: 'Amiri'; color: var(--royal-green); font-size: 2.2rem;"></h2>
        <div class="video-box" id="p-video-render"></div>
    </div>

</div>

<footer>Ø³Ù„Ø·Ù†Ø© Ø¹Ù…Ø§Ù† - Ù…Ù†ØµØ© Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù…Ø±ÙˆØ¬ Ø§Ù„Ø±Ù‚Ù…ÙŠØ© 2025 &copy;</footer>

<script>
    // Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø¸Ù…Ø©
    const curriculum = {
        "Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³": {
            "Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„": [
                {id: "5101", t: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª", v: "https://ict.moe.gov.om/tlawti/video/5/cls5_Islamic_Morsalat4.mp4"},
                {id: "5102", t: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ù†Ø³Ø§Ù†", v: "https://ict.moe.gov.om/tlawti/video/5/cls5_Islamic_Insan1.mp4"}
            ],
            "Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ": [
                {id: "5201", t: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø¨Ø£", v: "https://ict.moe.gov.om/tlawti/video/5/cls5_Islamic_Naba.mp4"}
            ]
        },
        "Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù…Ù†": {
            "Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„": [
                {id: "8101", t: "Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø¬Ø±Ø§Øª", v: "https://www.youtube.com/embed/69T4YIitv0c"}
            ],
            "Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ": []
        }
    };

    let state = { grade: "", semester: "" };
    let progress = JSON.parse(localStorage.getItem('oman_edu_progress')) || {};

    // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…ØµØ­Ù SVG Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©
    const quranSvg = `<svg class="icon-quran" viewBox="0 0 24 24"><path d="M19,2L14,6.5V17.5L19,13V2M6.5,5C4.57,5 2.89,5.83 1.74,7.14C1.27,7.68 1,8.37 1,9.09V17.91C1,19.33 2.41,20.35 3.75,19.79C4.6,19.43 5.53,19.23 6.5,19.23C8.75,19.23 10.74,20.19 12,21.73C13.26,20.19 15.25,19.23 17.5,19.23C18.47,19.23 19.4,19.43 20.25,19.79C21.59,20.35 23,19.33 23,17.91V9.09C23,8.37 22.73,7.68 22.26,7.14C21.11,5.83 19.43,5 17.5,5C15.25,5 13.26,5.96 12,7.5C10.74,5.96 8.75,5 6.5,5Z"/></svg>`;

    // Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©: Ø¹Ø±Ø¶ Ø§Ù„ØµÙÙˆÙ
    function init() {
        const grid = document.getElementById('grades-list');
        Object.keys(curriculum).forEach(grade => {
            grid.innerHTML += `
                <div class="card-item" onclick="selectGrade('${grade}')">
                    <div class="card-body">${quranSvg}<div><h4>${grade}</h4><p>Ø§Ù„Ù…Ù†Ø§Ù‡Ø¬ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø·ÙˆØ±Ø©</p></div></div>
                    <span>â—€</span>
                </div>`;
        });
    }

    function showView(from, to) {
        document.getElementById(from).classList.remove('active');
        document.getElementById(to).classList.add('active');
        window.scrollTo({top: 0, behavior: 'smooth'});
    }

    function selectGrade(g) {
        state.grade = g;
        document.getElementById('sem-grade-label').innerText = g;
        const list = document.getElementById('semesters-list');
        list.innerHTML = "";
        
        ["Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„", "Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ"].forEach(sem => {
            list.innerHTML += `
                <div class="card-item" onclick="selectSemester('${sem}')">
                    <div class="card-body">ğŸ“– <div><h4>${sem}</h4></div></div>
                    <span>â—€</span>
                </div>`;
        });
        showView('v-grades', 'v-semesters');
    }

    function selectSemester(s) {
        state.semester = s;
        renderSurahs();
        showView('v-semesters', 'v-surahs');
    }

    function renderSurahs() {
        const list = document.getElementById('surahs-list');
        list.innerHTML = "";
        const surahs = curriculum[state.grade][state.semester] || [];
        
        if(surahs.length === 0) {
            list.innerHTML = "<p style='text-align:center; padding:40px;'>Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ø¥Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡..</p>";
        } else {
            surahs.forEach(surah => {
                const isWatched = progress[surah.id];
                list.innerHTML += `
                    <div class="card-item" onclick="playSurah('${surah.id}', '${surah.t}', '${surah.v}')">
                        <div class="card-body">
                            ${quranSvg}
                            <div><h4>${surah.t}</h4><span class="badge ${isWatched?'badge-done':''}">${isWatched?'âœ… ØªÙ… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²':'ğŸ“– Ù„Ù… ÙŠÙØ´Ø§Ù‡Ø¯'}</span></div>
                        </div>
                        <span>â–¶</span>
                    </div>`;
            });
        }
        updateProgressBar(surahs);
    }

    function playSurah(id, title, url) {
        document.getElementById('p-surah-name').innerText = title;
        const render = document.getElementById('p-video-render');
        if(url.includes('youtube')) {
            render.innerHTML = `<iframe width="100%" height="100%" src="${url}" frameborder="0" allowfullscreen></iframe>`;
        } else {
            render.innerHTML = `<video width="100%" height="100%" controls autoplay><source src="${url}" type="video/mp4"></video>`;
        }
        
        // Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù…
        progress[id] = true;
        localStorage.setItem('oman_edu_progress', JSON.stringify(progress));
        showView('v-surahs', 'v-player');
    }

    function updateProgressBar(surahs) {
        if(surahs.length === 0) {
            document.getElementById('prog-fill').style.width = "0%";
            document.getElementById('prog-percent').innerText = "0%";
            return;
        }
        let count = 0;
        surahs.forEach(s => { if(progress[s.id]) count++; });
        const percent = Math.round((count / surahs.length) * 100);
        document.getElementById('prog-fill').style.width = percent + "%";
        document.getElementById('prog-percent').innerText = percent + "% Ù…ÙƒØªÙ…Ù„";
    }

    init();
</script>

</body>
</html>
