<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØµØ­Ù Ø§Ù„Ù…Ø±ÙˆØ¬ | Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --royal-green: #062c1b;
            --oman-green: #00843d;
            --gold-light: #d4af37;
            --gold-dark: #9d7d3d;
            --paper: #fdfaf1;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: var(--royal-green) url('https://www.transparenttextures.com/patterns/arabesque.png');
            font-family: 'Tajawal', sans-serif;
            color: #fff; min-height: 100vh;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„ÙˆØ²Ø§Ø±ÙŠ */
        .official-header {
            background: linear-gradient(135deg, #0a3d28, #062c1b);
            border-bottom: 4px solid var(--gold-light);
            padding: 20px; text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .header-content {
            max-width: 1100px; margin: 0 auto;
            display: flex; align-items: center; justify-content: space-between;
        }

        .school-logo { width: 80px; height: 80px; background: #fff; border: 3px solid var(--gold-light); border-radius: 50%; padding: 5px; }

        /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .main-container {
            max-width: 900px; margin: 40px auto;
            background: var(--paper); border-radius: 20px; padding: 30px;
            min-height: 80vh; box-shadow: 0 30px 70px rgba(0,0,0,0.7);
            color: #333; border-left: 12px solid var(--gold-dark);
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² */
        .prog-section { background: #f0f0f0; padding: 15px; border-radius: 12px; margin-bottom: 25px; border: 1px solid #ddd; }
        .prog-label { display: flex; justify-content: space-between; margin-bottom: 8px; font-weight: 700; color: var(--royal-green); }
        .prog-track { background: #dcdcdc; height: 12px; border-radius: 10px; overflow: hidden; }
        .prog-fill { background: linear-gradient(90deg, var(--oman-green), var(--gold-light)); width: 0%; height: 100%; transition: 1s ease; }

        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        .card-item {
            background: #fff; border: 1px solid #eee;
            border-right: 6px solid var(--gold-dark); border-radius: 15px;
            padding: 20px; margin-bottom: 15px;
            display: flex; align-items: center; justify-content: space-between;
            cursor: pointer; transition: 0.3s;
        }
        .card-item:hover { transform: translateX(-10px); background: #f9f6e9; }
        .icon-quran { width: 40px; height: 40px; fill: var(--gold-dark); }
        
        .badge { font-size: 0.75rem; padding: 4px 12px; border-radius: 20px; background: #eee; }
        .badge-done { background: var(--oman-green); color: white; }

        /* Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª */
        .view { display: none; animation: fadeIn 0.4s ease; }
        .view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .btn-action {
            background: var(--royal-green); color: white; border: none;
            padding: 12px 24px; border-radius: 8px; cursor: pointer;
            margin-bottom: 20px; font-weight: bold;
        }

        .video-box {
            width: 100%; aspect-ratio: 16/9; background: #000;
            border-radius: 15px; border: 5px solid var(--gold-dark); overflow: hidden;
        }

        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙ‡Ù†Ø¦Ø© */
        #congrats {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            background: var(--oman-green); color: white; padding: 15px 30px;
            border-radius: 50px; box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            display: none; z-index: 9999; font-weight: bold;
        }
    </style>
</head>
<body>

<div id="congrats">âœ¨ Ø£Ø­Ø³Ù†Øª! ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¯Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­ âœ¨</div>

<header class="official-header">
    <div class="header-content">
        <div><h2>Ø³Ù„Ø·Ù†Ø© Ø¹Ù…Ø§Ù†</h2><h3>ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ±Ø¨ÙŠØ© ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ…</h3></div>
        <img src="https://raw.githubusercontent.com/faissaltunisia/student-grades/main/Screenshot%202025-12-16%20235912.png" class="school-logo">
        <div style="text-align: left;"><h2>Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù…Ø±ÙˆØ¬</h2><h3>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø°ÙƒÙŠ</h3></div>
    </div>
</header>

<div class="main-container">
    
    <div id="v-grades" class="view active">
        <h2 style="text-align: center; font-family: 'Amiri'; color: var(--gold-dark); margin-bottom: 30px;">ÙÙ‡Ø±Ø³ Ø§Ù„ØµÙÙˆÙ</h2>
        <div id="grades-list"></div>
    </div>

    <div id="v-semesters" class="view">
        <button class="btn-action" onclick="showView('v-semesters', 'v-grades')">ğŸ”™ Ø¹ÙˆØ¯Ø©</button>
        <h2 id="g-label" style="margin-bottom: 20px; color: var(--royal-green);"></h2>
        <div id="sems-list"></div>
    </div>

    <div id="v-surahs" class="view">
        <button class="btn-action" onclick="showView('v-surahs', 'v-semesters')">ğŸ”™ Ø¹ÙˆØ¯Ø©</button>
        <div class="prog-section">
            <div class="prog-label"><span>ØªÙ‚Ø¯Ù…Ùƒ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</span><span id="p-pct">0%</span></div>
            <div class="prog-track"><div class="prog-fill" id="p-fill"></div></div>
        </div>
        <div id="surahs-list"></div>
    </div>

    <div id="v-player" class="view">
        <button class="btn-action" onclick="closePlayer()">ğŸ”™ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø¢Ù†</button>
        <h2 id="p-title" style="text-align: center; font-family: 'Amiri'; color: var(--royal-green); margin-bottom: 15px;"></h2>
        <div class="video-box" id="vid-area"></div>
        <p style="text-align:center; margin-top:10px; color:#666;">Ø³ÙˆÙ ÙŠØºÙ„Ù‚ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡..</p>
    </div>

</div>

<script>
    const data = {
        "Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³": {
            "Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„": [
                {id: "s1", t: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª", v: "https://ict.moe.gov.om/tlawti/video/5/cls5_Islamic_Morsalat4.mp4"},
                {id: "s2", t: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ù†Ø³Ø§Ù†", v: "https://ict.moe.gov.om/tlawti/video/5/cls5_Islamic_Insan1.mp4"}
            ],
            "Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ": [
                {id: "s3", t: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø¨Ø£", v: "https://ict.moe.gov.om/tlawti/video/5/cls5_Islamic_Naba.mp4"}
            ]
        }
    };

    let current = { g: "", s: "" };
    let progress = JSON.parse(localStorage.getItem('oman_v4')) || {};

    function init() {
        const list = document.getElementById('grades-list');
        Object.keys(data).forEach(g => {
            list.innerHTML += `<div class="card-item" onclick="pickGrade('${g}')"><div><h4>${g}</h4></div><span>â—€</span></div>`;
        });
    }

    function showView(from, to) {
        document.getElementById(from).classList.remove('active');
        document.getElementById(to).classList.add('active');
    }

    function pickGrade(g) {
        current.g = g;
        document.getElementById('g-label').innerText = g;
        const list = document.getElementById('sems-list');
        list.innerHTML = "";
        Object.keys(data[g]).forEach(s => {
            list.innerHTML += `<div class="card-item" onclick="pickSem('${s}')"><div><h4>${s}</h4></div><span>â—€</span></div>`;
        });
        showView('v-grades', 'v-semesters');
    }

    function pickSem(s) {
        current.s = s;
        renderSurahs();
        showView('v-semesters', 'v-surahs');
    }

    function renderSurahs() {
        const list = document.getElementById('surahs-list');
        list.innerHTML = "";
        const items = data[current.g][current.s] || [];
        items.forEach(item => {
            const done = progress[item.id];
            list.innerHTML += `
                <div class="card-item" onclick="openVideo('${item.id}', '${item.t}', '${item.v}')">
                    <div style="display:flex; align-items:center; gap:15px;">
                        <div><h4>${item.t}</h4><span class="badge ${done?'badge-done':''}">${done?'âœ… Ù…ÙƒØªÙ…Ù„':'ğŸ“– Ø§Ø¨Ø¯Ø£'}</span></div>
                    </div>
                    <span>â–¶</span>
                </div>`;
        });
        updateProg(items);
    }

    function openVideo(id, title, url) {
        document.getElementById('p-title').innerText = title;
        const area = document.getElementById('vid-area');
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ Ù„Ù…Ø±Ø§Ù‚Ø¨ØªÙ‡
        const videoHtml = `<video id="active-video" width="100%" height="100%" controls autoplay>
                            <source src="${url}" type="video/mp4">
                           </video>`;
        area.innerHTML = videoHtml;

        const videoElem = document.getElementById('active-video');
        
        // Ø®Ø§ØµÙŠØ© Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
        videoElem.onended = function() {
            progress[id] = true;
            localStorage.setItem('oman_v4', JSON.stringify(progress));
            showCongrats();
            closePlayer();
        };

        showView('v-surahs', 'v-player');
    }

    function showCongrats() {
        const c = document.getElementById('congrats');
        c.style.display = 'block';
        setTimeout(() => c.style.display = 'none', 3000);
    }

    function closePlayer() {
        document.getElementById('vid-area').innerHTML = ""; 
        showView('v-player', 'v-surahs');
        renderSurahs();
    }

    function updateProg(items) {
        if(items.length === 0) return;
        let count = items.filter(i => progress[i.id]).length;
        let pct = Math.round((count / items.length) * 100);
        document.getElementById('p-fill').style.width = pct + "%";
        document.getElementById('p-pct').innerText = pct + "%";
    }

    init();
</script>
</body>
</html>
